<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bahng Pocha | Menu</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/CSS/Pictures/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/CSS/Pictures/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/CSS/Pictures/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  
  <style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        color: #333;
        line-height: 1.6;
        max-width: 900px;
        margin: 20px auto;
        padding: 0 20px;
    }

    /* Menu Grid */
    h2 {
        font-size: 1.4em;
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
        margin-top: 50px;
        margin-bottom: 25px;
        color: #111;
        font-weight: 600;
    }

    .menu-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 25px;
    }

    .menu-item {
        border: 1px solid #eee;
        border-radius: 6px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.2s ease;
        background: #fff;
        text-align: center;
        position: relative;
    }

    .menu-item:hover {
        border-color: #bbb;
    }

    .menu-item.selected {
        background-color: #e8f0fe;
        border-color: #0056b3;
    }

    .item-image {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-radius: 4px;
        margin-bottom: 15px;
        background-color: #f9f9f9;
    }

    .item-name {
        font-weight: bold;
        font-size: 1.05em;
        margin-bottom: 8px;
        color: #222;
        line-height: 1.3;
    }

    .item-desc {
        font-size: 0.85em;
        color: #666;
        line-height: 1.5;
    }

    .check-icon {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #0056b3;
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8em;
        opacity: 0;
        transform: scale(0.8);
        transition: all 0.2s;
    }

    .menu-item.selected .check-icon {
        opacity: 1;
        transform: scale(1);
    }

    /* Order Section */
    .order-section {
        margin-top: 60px;
        padding: 25px;
        background-color: #fafafa;
        border: 1px solid #eee;
        border-radius: 8px;
    }

    .order-header { font-size: 1.2em; font-weight: bold; margin-bottom: 15px; text-align: center; }
    
    .selected-items-list { margin-bottom: 20px; font-size: 0.95em; }
    .selected-item-row { padding: 5px 0; border-bottom: 1px dashed #ddd; }
    .empty-msg { color: #888; text-align: center; font-style: italic; }

    .form-row { margin-bottom: 15px; }
    .form-row label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9em; }
    .form-row input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }

    .btn-submit {
        display: block; width: 100%; padding: 12px;
        background-color: #333; color: white;
        border: none; border-radius: 4px;
        font-size: 1em; cursor: pointer;
        transition: background-color 0.2s;
    }
    .btn-submit:hover { background-color: #555; }
    .btn-submit:disabled { background-color: #ccc; cursor: not-allowed; }

    /* Responsiveness */
    @media (max-width: 768px) {
        .menu-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 480px) {
        .menu-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<div style="text-align: center; margin-top: 40px; margin-bottom: 40px;">
    <h1 style="font-size: 2.8em; font-weight: bold; margin-bottom: 10px; color: #111;">Bahng Pocha</h1>
    <p style="color: #666;">Select items to add to your order.</p>
</div>

<!-- Menu Categories -->
<div id="menu-content">
    
    <h2>Appetizers</h2>
    <div class="menu-grid">
        <div class="menu-item" onclick="toggleItem(this, 'Korean Potato Pancakes')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/potato_pancakes.png" alt="Potato Pancakes" class="item-image">
            <div class="item-name">Korean Potato Pancakes</div>
            <div class="item-desc">Crispy Korean-style potato pancakes served with soy dipping sauce.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Peanut Noodles')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <div class="item-image" style="display:flex; align-items:center; justify-content:center; color:#ccc; background:#f5f5f5;"><i class="fas fa-utensils fa-2x"></i></div>
            <div class="item-name">Peanut Noodles</div>
            <div class="item-desc">Cold sesame noodles with creamy peanut sauce, cucumber, and scallions.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Clam Chowder')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/clam_chowder.png" alt="Clam Chowder" class="item-image">
            <div class="item-name">Clam Chowder</div>
            <div class="item-desc">Creamy New England style chowder with tender clams, potatoes, and herbs.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Chicken Karaage')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/chicken_kaarage.png" alt="Chicken Karaage" class="item-image">
            <div class="item-name">Chicken Karaage</div>
            <div class="item-desc">Japanese-style fried chicken with a crispy soy-ginger coating.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Soy Marinated Egg')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/marinated_egg.png" alt="Soy Marinated Egg" class="item-image">
            <div class="item-name">Soy Marinated Egg</div>
            <div class="item-desc">Addictive Korean soy-marinated soft-boiled eggs with chili and sesame.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Korean Steamed Eggs')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/steamed_eggs.png" alt="Korean Steamed Eggs" class="item-image">
            <div class="item-name">Korean Steamed Eggs</div>
            <div class="item-desc">Silky and fluffy Korean-style steamed egg custard (Gyeran-jjim).</div>
        </div>
    </div>

    <h2>Main Courses: Asian</h2>
    <div class="menu-grid">
        <div class="menu-item" onclick="toggleItem(this, 'Miso Steak Udon')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/miso_steak_udon.png" alt="Miso Steak Udon" class="item-image">
            <div class="item-name">Miso Steak Udon</div>
            <div class="item-desc">Thick udon noodles in rich miso broth with tender sliced steak and green onions.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Salmon Nigiri')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/salmon_nigiri.png" alt="Salmon Nigiri" class="item-image">
            <div class="item-name">Salmon Nigiri</div>
            <div class="item-desc">Fresh slice of raw salmon over pressed vinegared rice.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Honey Gochujang Chicken')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/honey_gochujang_chicken.png" alt="Honey Gochujang Chicken" class="item-image">
            <div class="item-name">Honey Gochujang Chicken</div>
            <div class="item-desc">Crispy fried chicken glazed with sweet and spicy honey gochujang sauce.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Chinese Jiajiangmien')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/chinese_jiajiangmien.png" alt="Chinese Jiajiangmien" class="item-image">
            <div class="item-name">Chinese Jiajiangmien</div>
            <div class="item-desc">Traditional Chinese noodles with savory black bean sauce, ground pork, and fresh vegetables.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Dak Galbi')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/dak_galbi.png" alt="Dak Galbi" class="item-image">
            <div class="item-name">Dak Galbi</div>
            <div class="item-desc">Spicy Korean stir-fried chicken with vegetables, rice cakes, and gochujang sauce.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Kimchi Fried Rice')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/kimchi_fried_rice.png" alt="Kimchi Fried Rice" class="item-image">
            <div class="item-name">Kimchi Fried Rice</div>
            <div class="item-desc">Classic Korean fried rice with aged kimchi, pork, and topped with a fried egg.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Korean Pork Galbi')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/korean_pork_galbi.png" alt="Korean Pork Galbi" class="item-image">
            <div class="item-name">Korean Pork Galbi</div>
            <div class="item-desc">Marinated grilled pork ribs with Korean pear, soy sauce, and sesame oil.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Spicy Sweet Stir Fried Pork')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/spicy_sweet_stir_fried_pork.png" alt="Spicy Sweet Stir Fried Pork" class="item-image">
            <div class="item-name">Spicy Sweet Stir Fried Pork</div>
            <div class="item-desc">Korean-style pork stir-fried with vegetables in a spicy-sweet gochujang glaze.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Kimchi Jjigae')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/kimchi_stew.png" alt="Kimchi Stew" class="item-image">
            <div class="item-name">Kimchi Jjigae</div>
            <div class="item-desc">Traditional Korean kimchi stew with pork, tofu, and aged kimchi in a spicy broth.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Shrimp Udon Bowl')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/shrimp_udon_bowl.png" alt="Shrimp Udon Bowl" class="item-image">
            <div class="item-name">Shrimp Udon Bowl</div>
            <div class="item-desc">Japanese udon noodles in clear broth with tempura shrimp and vegetables.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Soondubu Jjigae')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/soondubu.png" alt="Soondubu" class="item-image">
            <div class="item-name">Soondubu Jjigae</div>
            <div class="item-desc">Soft tofu stew with seafood, vegetables, and egg in a spicy Korean broth.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Spicy Seafood Tomato Noodles')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/spicy_seafood_tomato_noodles.png" alt="Spicy Seafood Tomato Noodles" class="item-image">
            <div class="item-name">Spicy Seafood Tomato Noodles</div>
            <div class="item-desc">Fusion noodle dish with mixed seafood in a spicy tomato-based broth.</div>
        </div>
    </div>

    <h2>Main Courses: Western</h2>
    <div class="menu-grid">
        <div class="menu-item" onclick="toggleItem(this, 'Fresh Shrimp Roll')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/shrimp_roll.png" alt="Shrimp Roll" class="item-image">
            <div class="item-name">Fresh Shrimp Roll</div>
            <div class="item-desc">Vietnamese-style fresh spring rolls with shrimp, herbs, and peanut dipping sauce.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Mini Sliders')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/sliders.png" alt="Sliders" class="item-image">
            <div class="item-name">Mini Sliders</div>
            <div class="item-desc">Three juicy beef sliders with cheese, lettuce, and special sauce on brioche buns.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Salmon Lox Bagel')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/salmon_lox_bagel.png" alt="Salmon Lox Bagel" class="item-image">
            <div class="item-name">Salmon Lox Bagel</div>
            <div class="item-desc">Toasted bagel topped with cream cheese, cured salmon lox, capers, and red onion.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Seafood Aglio e Olio')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/seafood_oil_pasta.png" alt="Seafood Oil Pasta" class="item-image">
            <div class="item-name">Seafood Aglio e Olio</div>
            <div class="item-desc">Italian pasta with fresh seafood, garlic, olive oil, and red pepper flakes.</div>
        </div>
        <div class="menu-item" onclick="toggleItem(this, 'Tomato Sausage Spaghetti')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/tomato_sausage_spaghetti.png" alt="Tomato Sausage Spaghetti" class="item-image">
            <div class="item-name">Tomato Sausage Spaghetti</div>
            <div class="item-desc">Classic Italian spaghetti with Italian sausage in rich tomato sauce.</div>
        </div>
    </div>

    <h2>Beverages</h2>
    <div class="menu-grid">
        <div class="menu-item" onclick="toggleItem(this, 'Raspberry Martini')">
            <div class="check-icon"><i class="fas fa-check"></i></div>
            <img src="img/raspberry_martini.png" alt="Raspberry Martini" class="item-image">
            <div class="item-name">Raspberry Martini</div>
            <div class="item-desc">Sweet and tangy martini cocktail infused with fresh raspberry flavor.</div>
        </div>
    </div>

</div>

<!-- Order Section -->
<div class="order-section" id="orderSection">
    <div class="order-header">Your Order</div>
    <div class="selected-items-list" id="selectedItems">
        <div class="empty-msg">Select items from the menu above.</div>
    </div>
    
    <div class="form-row">
        <label for="customerName">Name</label>
        <input type="text" id="customerName" placeholder="Enter your name" required>
    </div>
    <button type="button" class="btn-submit" id="submitOrder" disabled>Submit Order</button>
</div>

<script>
let selectedItems = new Set();

function updateOrderSection() {
    const selectedItemsDiv = document.getElementById('selectedItems');
    const submitBtn = document.getElementById('submitOrder');
    
    if (selectedItems.size === 0) {
        selectedItemsDiv.innerHTML = '<div class="empty-msg">Select items from the menu above.</div>';
        submitBtn.disabled = true;
    } else {
        selectedItemsDiv.innerHTML = '';
        selectedItems.forEach(item => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'selected-item-row';
            itemDiv.innerHTML = `<span>${item}</span>`;
            selectedItemsDiv.appendChild(itemDiv);
        });
        submitBtn.disabled = false;
    }
}

function toggleItem(element, itemName) {
    if (selectedItems.has(itemName)) {
        selectedItems.delete(itemName);
        element.classList.remove('selected');
    } else {
        selectedItems.add(itemName);
        element.classList.add('selected');
    }
    updateOrderSection();
}

async function submitOrder() {
    const customerName = document.getElementById('customerName').value;
    const submitBtn = document.getElementById('submitOrder');
    
    if (!customerName.trim()) {
        alert('Please enter your name');
        return;
    }
    
    if (selectedItems.size === 0) {
        alert('Please select at least one item');
        return;
    }
    
    submitBtn.disabled = true;
    submitBtn.textContent = 'Submitting...';
    
    try {
        let successCount = 0;
        let failedItems = [];
        
        for (const item of selectedItems) {
            const orderData = { name: customerName, dish: item };
            
            try {
                const response = await fetch('https://ejppuepbgubqjoxgnygg.supabase.co/rest/v1/orders', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqcHB1ZXBiZ3VicWpveGdueWdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5OTExNDksImV4cCI6MjA2OTU2NzE0OX0.qCcuCO08Ad5B5yZlRptYVXm70iR1op5y7h3QPlow3vc',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqcHB1ZXBiZ3VicWpveGdueWdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5OTExNDksImV4cCI6MjA2OTU2NzE0OX0.qCcuCO08Ad5B5yZlRptYVXm70iR1op5y7h3QPlow3vc'
                    },
                    body: JSON.stringify(orderData)
                });
                
                if (response.ok) { successCount++; } 
                else { failedItems.push(item); }
            } catch (itemError) {
                failedItems.push(item);
            }
        }
        
        if (successCount === selectedItems.size) {
            alert(`Thank you ${customerName}! All ${successCount} items have been submitted.`);
        } else if (successCount > 0) {
            alert(`${successCount} items submitted. ${failedItems.length} failed: ${failedItems.join(', ')}`);
        } else {
            throw new Error('All items failed to submit');
        }
        
        if (successCount > 0) {
            selectedItems.clear();
            document.getElementById('customerName').value = '';
            document.querySelectorAll('.menu-item.selected').forEach(item => item.classList.remove('selected'));
            updateOrderSection();
        }
    } catch (error) {
        alert(`Order submission failed: ${error.message}`);
    } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Order';
    }
}

document.getElementById('submitOrder').addEventListener('click', submitOrder);
</script>

</body>
</html>

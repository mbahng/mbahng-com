\section{Measures}  

  The introduction of the $\sigma$-algebra seemed quite arbitrary, but bear with me as it will make sense very soon. In general, we want to define a measure $\mu: 2^X \to [0, +\infty]$ that satisfies two properties. 
  \begin{enumerate}
    \item \textit{Null empty set}. $\mu(\emptyset) = 0$. 
    \item \textit{Countable Additivity}. For all countable collections $\{A_k\}_{k=1}^\infty$ of pairwise disjoint subsets $A_k \subset 2^{X}$, 
    \begin{equation}
      \mu \bigg( \bigsqcup_{k=1}^\infty A_k \bigg) = \sum_{k=1}^\infty \mu(A_k)
    \end{equation}
  \end{enumerate} 

  The first condition is important because it allows us to take finite disjoint unions. That is, since $\mu(A_1 \cup A_2) = \mu(A_1 \cup A_2 \cup \emptyset \cup \ldots)$, we have 
  \begin{equation}
    \sum_{k=1}^\infty = \mu(A_1) + \mu(A_2)
  \end{equation}
  Disjointness is clearly important since if it wasn't, then $\mu(A) = \mu(A \cup A) = 2 \mu(A)$, which is absurd. 

  It turns out that this second property is highly restrictive, and in fact some measures cannot be even defined. But this is self-contradictory, as it turns out that that we can create partitions of weird sets and rearrange them to get paradoxes (the most famous being the Banach-Tarski paradox). Therefore, we need to find a certain subset $\mathcal{A} \subset 2^X$ that is consistent with this definition of measure. 
  
  \begin{enumerate}
    \item We want to define a function $\mu^\ast: 2^X \to [0, +\infty]$ that has a slightly less restrictive form of property 2.\footnote{How we implement such a function is a different question, though.} We should always be able to construct such a function, which we will call the \textit{outer measure}. 

    \item Then, we want to use this outer measure to define sets that should like in $\mathcal{A}$. We call these \textit{measurable sets}. It will turn out that $\mathcal{A}$ must be a $\sigma$-algebra. 

    \item Finally, we take the restriction of the outer measure to only measurable sets, and this defines our measure: $\mu = \mu^\ast \big|_{\mathcal{A}}$.  
  \end{enumerate}

  \footnote{Old but good explanataion: Now let's try to construct a measure $\lambda$ on the Borel $\sigma$-algebra $\mathcal{B}(\mathbb{R})$ that assigns length, i.e. $\lambda([a, b]) = b - a$. We will do so by constructing outer measures $\lambda^*: 2^\mathbb{R} \longrightarrow \mathbb{R}$ that acts on the power set of $\mathbb{R}$ s.t. $\lambda^*([a, b]) = b - a$. But this turns out to have its own problems and contradictions, so once we construct such a $\lambda^*$, we will "throw away" all the sets that don't behave nicely under $\lambda^*$ and just use its restriction on the Borel algebra. It turns out that the sets that do behave well under $\lambda^*$ is bigger than the Borel algebra, call it $\mathcal{M}_{\lambda^*}$. So, we have $\mathcal{B}(\mathbb{R}) \subset \mathcal{M}_{\lambda^*} \subset 2^\mathbb{R}$. We will do this in full generality in the following way. We take any space $X$ and construct an outer measure $\mu^*$ on its power set $2^X$. Then, we construct the $\sigma$-algebra of well-behaved sets $\mathcal{M}_{\mu^*} \subset 2^X$, and define our measure $\mu$ on $\mathcal{M}_{\mu^*}$. When defining our outer measure, the condition that the outer measure of a disjoint union of subsets is equal to the sum of the outer measure of the subsets is a bit too restricting, so we use a softer condition. }

  \begin{definition}[Measure]
    Given a measurable space $(X, \mathcal{A})$, a \textbf{measure} is a function $\mu : \mathcal{A} \longrightarrow [0, +\infty]$\footnote{We usually introduce this by taking the codomain to be either $[0, +\infty]$ or $(-\infty, +\infty)$, which is the signed measure.} satisfying 
    \begin{enumerate}
      \item Null empty set $\mu(\emptyset) = 0$. 
      \item Countable additivity: 
        For all countable collections $\{A_k\}_{k=1}^\infty$ of pairwise disjoint subsets $A_k \in \mathcal{A}$, 
      \begin{equation}
        \mu \bigg( \bigsqcup_{k=1}^\infty A_k \bigg) = \sum_{k=1}^\infty \mu(A_k)
      \end{equation}
      Remember that we are allowed to take countable unions inside our $\sigma$-algebra, so this makes sense. 
    \end{enumerate}
    This immediately implies that given $A, B \in \mathcal{A}$, then $A \subset B \implies \mu(A) \leq \mu(B)$. The triplet $(X, \mathcal{A}, \mu)$ is called a \textbf{measure space}. 
  \end{definition}

  Let's go through each of these three steps in detail. 

\subsection{Outer Measure} 

  \begin{definition}[Outer Measure]
    Given a space $X$, an \textbf{outer measure} is a function $\mu^\ast : 2^X \to [0, +\infty]$ satisfying either the two properties. 
    \begin{enumerate}
      \item \textit{Null Empty Set}. $\mu^\ast(\emptyset) = 0$. 
      \item \textit{Countable Subadditivity}. For arbitrary subset $A, B_1, B_2, \ldots$, 
      \begin{equation}
        A \subset \bigcup_{k=1}^\infty B_k \implies \mu(A) \leq \sum_{k=1}^\infty \mu(B_k)
      \end{equation} 
    \end{enumerate}

    or equivalently, the three properties. 
    \begin{enumerate}
      \item \textit{Null Empty Set}. $\mu^\ast(\emptyset) = 0$. 
      \item \textit{Monotonicity}. If $A, B \subset X$, then 
      \begin{equation}
        A \subset B \implies \mu^\ast (A) \leq \mu^\ast (B)
      \end{equation}
      \item \textit{Countable Subadditivity}. For any countable collection of subsets $\{A_k\}$ of $X$, 
      \begin{equation}
        \mu^\ast \bigg( \bigcup_k A_k \bigg) \leq \sum_{k} \mu^\ast (A_k) 
      \end{equation}
    \end{enumerate}
  \end{definition}
  \begin{proof}
    Prove that the two definitions are equal. 
  \end{proof} 

  Okay, so what are some examples of outer measures that we can define on $\mathbb{R}$, or in general $\mathbb{R}^n$? Well one approach would be to generalize the concepts length/area/volume. Such that for ``simple'' sets $A$ where we know what the area is, the outer measure of $A$ should coincide with the area of $A$. Let's first start by defining what a ``simple'' set is. 

  \begin{definition}[Elementary Set] 
    An \textbf{elementary set} $E \subset \mathbb{R}^n$ is defined recursively as follows. 
    \begin{enumerate}
      \item An \textbf{interval} $I \subset \mathbb{R}$ is one of the sets $(a, b), [a, b), (a, b], [a, b]$ for $a, b \in \mathbb{R}$. 
      \item For $n > 1$, an elementary set $E \subset \mathbb{R}^n$ is $E = I_1 \times \ldots \times I_n$ for intervals $I_1, \ldots, I_k$. 
    \end{enumerate}
  \end{definition}

  \begin{definition}[Size]
    The \textbf{size} of an elementary set $E = I_1 \times \ldots \times I_n \subset \mathbb{R}^n$ is defined recursively as 
    \begin{enumerate}
      \item The \textbf{length} of an interval $I$ is $\ell(I) = b - a$. 
      \item The \textbf{size} of $E$ is $s(E) = \prod_{i=1}^n (b_i - a_i)$. 
    \end{enumerate}
  \end{definition} 

  \begin{definition}[Lebesgue Outer Measure]
    Given any set $A \subset \mathbb{R}$, the \textbf{Lebesgue outer measure} is defined 
    \begin{equation}
      \lambda^\ast (A) = \inf  \left\{ \sum_{k=1}^\infty \ell (I_k) \; \bigg| \; A \subset \bigcup_{k=1}^\infty I_k \right\} 
    \end{equation}
    Intuitively, it is just the infimum of the sums of lengths of the intervals that cover $A$.\footnote{I use the notation $\mu^\ast$ to represent general outer measures, and $\lambda^\ast$ to represent specifically the Lebesgue outer measure.} 
  \end{definition} 

  It's a hard definition, but a natural one, since we're taking all these intervals and trying to make them as snug as possible to define the outer measure of an arbitrary set. As always, let's begin with the simplest case in the real line. The following definition suffices. 

  \begin{lemma}[Lebesgue Outer Measure is an Outer Measure]
    The Lebesgue outer measure $\lambda^\ast$ on $\mathbb{R}$ is indeed an outer measure. 
  \end{lemma} 
  \begin{proof}
    We prove the three properties. The first two are trivial. For the third, we wish to show that $\lambda^\ast ( \cup A_n) \leq \sum \lambda^\ast (A_n)$. For each $n$, find a specific cover $\{I_{n_k}\}_{k=1}^\infty$ of $A_n$ such that it ``just covers'' enough (this is possible since $\lambda^\ast$ is an infimum) such that for any $\epsilon > 0$, 
    \begin{equation}
      \sum_k \ell(I_{n_k}) - \frac{\epsilon}{2^k} \leq \lambda^\ast (A_k)
    \end{equation} 
    Then, 
    \begin{equation}
      \bigcup A_n \subset \bigcup_{n, k = 1} I_{n_k} \implies \sum_{n, k = 1} \ell(I_{n_k}) \leq \sum_{n=1}^\infty \lambda^\ast (A_n) + \epsilon
    \end{equation}
    and since $\epsilon$ is arbitrary, we are done. 

    The first condition is trivial. As for 2, if I have $A \subset B \subset \mathbb{R}$ and have a covering of $B$, then I also have a covering of $A$, and so the infimum corresponding to the covering of $B$ must be greater than or equal to the infimum of that corresponding to the covering of $A$. For 3, we want to prove that the outer measure of the union of $A_k$'s is less than or equal to the sum of the outer measures of the $A_k$'s. We pick $\epsilon > 0$ and have some covering $\{(a^k_j, b^k_j)\}_{j=1}^\infty \in C_{A^k}$. So we have 
    \begin{equation}
      \lambda^*(A_k) \leq \sum_{j=1}^\infty b^k_j - a^k_j
    \end{equation}
    We want the inequality to go the other way around, but we can't do that. But note that $\lambda^* (A_k)$ is the infimum of all coverings $\{(a^k_j, b^k_j)\}_{j=1}^\infty$ of $A_k$, and so we can choose a covering that is as close to $\lambda^* (A_k)$, and then add a term of $\epsilon$ to $\lambda^*(A_k)$ to make it greater than this covering. This is an important step of the proof that is used often! 
    \begin{equation}
      \frac{\epsilon}{2^k} + \lambda^* (A_k) \geq \sum_{j=1}^\infty b_j^k - a_j^k 
    \end{equation}
    Now, 
    \begin{equation}
      A = \bigcup_{k=1}^\infty A_k \subset \bigcup_{k=1}^\infty \bigcup_{j=1}^\infty (a_j^k, b_j^k)
    \end{equation}
    and we can see that $\{(a_j^k , b_j^k)\}_{j, k=1}^\infty \in C_A$ is a countable covering of $A$ (since the countable union of a countable union is countable), implying that 
    \begin{equation}
      \lambda^* (A) \leq \sum_{k=1}^\infty \sum_{j=1}^\infty (b_j^k - a_j^k) \leq \sum_{k=1}^\infty \bigg( \lambda^* (A_k) + \frac{\epsilon}{2^k} \bigg) = \epsilon + \sum_{k=1}^\infty \lambda^*(A_k)
    \end{equation}
    and so setting $\epsilon$ arbitrarily small we have $\lambda^* (A) \leq \sum_{k=1}^\infty \lambda^* (A_k)$. 
  \end{proof}

  Not only is it an outer measure; it also satisfies the property that we wanted, along with the bonus property of translation invariance! 

  \begin{theorem}[Lebesgue Outer Measure Coincides with Interval Length]
    $\lambda^\ast$ satisfies the property that for any interval $I \subset \mathbb{R}$, $\lambda^\ast (I) = S(I)$. 
  \end{theorem}
  \begin{proof}
    Let $I = [a, b]$. Take $I_1 = [a - \epsilon, b + \epsilon]$. 
    \begin{enumerate}
      \item For an upper bound, we see $\lambda^\ast (I) \leq b - a + 2\epsilon$, where $2 \epsilon \to 0$. 
      \item For a lower bound, suppose 
      \begin{equation}
        \bigcup_{n=1}^\infty I_n \supset [a, b] 
      \end{equation}
      By Heine-Borel, we can extract a finite subcollection $I_1, \ldots, I_n$ that still covers $[a, b]$. Under $(a_k, b_k)$ so that $a_k$ is increasing. 
      \begin{enumerate}
        \item Consider $(a_1, b_1)$. If $b_1 > b$, we are done. 
        \item Otherwise, $b_1 \in (a_2, b_2)$. If $b_2 > b$, then 
        \begin{equation}
          b_2 - a_2 + b_1 - a_1 \geq b_2 - a_1 > b - a
        \end{equation}
        \item If not, then we keep going until we get to $(a_n, b_n)$. If $b_n > b$, then 
          \begin{equation}
            b_n - a_n + b_{n-1} - a_{n-1} + \ldots + b_1 - a_1 \geq b_n - a_1  > b - a
          \end{equation}
      \end{enumerate}
    \end{enumerate}
  \end{proof}

  \begin{corollary}[Translation Invariance]
    $\lambda^\ast$ is translation invariant. That is, for any $A \subset \mathbb{R}$, 
    \begin{equation}
      \lambda^\ast (A) = \lambda^\ast (A + x)
    \end{equation}
    where $A + x \coloneqq \{a + x \in \mathbb{R} \mid a \in A \}$. 
  \end{corollary}

  \begin{theorem}[Countable Sets have Outer Measure $0$]
    Any countable set of $\mathbb{R}$ has Lebesgue outer measure $0$. 
  \end{theorem}
  \begin{proof}
    Just enumerate $A = \{x_1, \ldots \}$. Then, we set $I_k = \big( x_k - \frac{\epsilon}{2^k}, x_k + \frac{\epsilon}{2^k} \big)$. Then, 
    \begin{equation}
      \sum_{k=1}^\infty \ell(I_k) = \epsilon
    \end{equation}
  \end{proof} 

  We can also generalize this further by introducing a increasing, continuous function $F: \mathbb{R} \rightarrow \mathbb{R}$ and defining the outer measure to be 
  \begin{equation}
   \lambda^\ast (A) = \inf_{C_A} \sum_{j=1}^\infty \big( F(b_j) - F(a_j) \big) 
  \end{equation}

  In $\mathbb{R}^n$, this construction is exactly the same, since we can take rectangular prisms, which we know the area/volume of, make a countable covering of some arbitrary set $A \subset \mathbb{R}^n$, and then find the infimum of the volume of this set. But we can't apply the outer measure on power sets since there exists some sets that do not behave like how we want it to behave under a measure. For example, there exists disjoint $A, B \subset (0, 1)$ s.t. $A \cup B = (0, 1)$, but $\lambda^*(A) + \lambda^*(B) > 1$. 

\subsection{Measurable Sets} 

  \begin{definition}[Carathéodory's criterion]
    Given outer measure $\mu^\ast$ on $X$, a set $E \subset X$  is called \textbf{$\mu^\ast$-measurable} if for every set $A \subset X$, 
    \begin{equation}
      \mu^\ast (A \cap E) + \mu^\ast (A \cap E^c) = m^\ast (A) 
    \end{equation}

  \end{definition} 

  In general it says that no matter how nasty a subset $A$ is, $E$ should be nice enough that we can cut $E$ into two pieces $C$ and $D$. Due to the definition of the outer measure, we are guaranteed to have  $\mu^\ast (C \cup D) \leq \mu^\ast (C) + \mu^\ast (D)$. The sets with which this inequality is strict is not measurable, and the measurable sets specifically satisfy 
  \begin{enumerate}
    \item equality 
    \item for countable sets. 
  \end{enumerate}

  One should note that in particular, if $E$ is $\mu^\ast$-measurable and $A$ is any set disjoint from $E$, then we must have 
  \begin{align}
    \mu^\ast (A \cup E) & = \mu^\ast ((A \cup E) \cap E) + \mu^\ast ((A \cup E) \cap E^c) \\ 
                        & = \mu^\ast (E) + \mu^\ast (A)
  \end{align}
  which solves a bit of the theorem on measures. In practice, we will often prove that $\mu^\ast (A \cap E) + \mu^\ast (A \cap E^c) \leq m^\ast (A)$, since the properties of outer measure implies $\geq$. 

  \begin{example}
    Take $X = \mathbb{R}$ and have $B = (-\infty, b]$. Then $B^c = (b, \infty)$, and $B$ divides $\mathbb{R}$ into a right side and a left side. If we take any subset $A \subset \mathbb{R}$, then $B$ is nice enough to divide $A$ into a left and a right side. 
  \end{example} 

  Now we want to establish some nice properties. 

  \begin{theorem}[Outer Measure $0$ Sets are Measurable]
    For any outer measure $\mu^\ast$ on $X$, $E \subset X$ with $\mu^\ast (E) = 0$  implies that $E$ is $\mu^\ast$-measurable. 
  \end{theorem}
  \begin{proof}
    Take any $A$. Then $(A \cap E) \subset E$ and $(A \cap E^c) \subset A$. So by monotonicity, 
    \begin{equation}
      \mu^\ast(A \cap E) + \mu^\ast (A \cap E^c) \leq \mu^\ast(E) + \mu^\ast(A) = \mu^\ast (A)
    \end{equation}
    and this by definition means that $E$ is measurable. 
  \end{proof}

  Now let's talk about constructing measurable sets. 

  \begin{theorem}[Finite Unions are Measurable]
    A finite union of $\mu^\ast$-measurable sets is $\mu^\ast$-measurable. 
  \end{theorem}
  \begin{proof}
    It suffices to prove for $E_1, E_2$, and the rest follows by induction. Fix any $A$. Then 
    \begin{align}
      \mu^\ast (A) & = \mu^\ast (A \cap E_1) + \mu^\ast (A \cap E_1^c) \\ 
                   & = \mu^\ast (A \cap E_1) + \mu^\ast \big((A \cap E_1^c) \cap E_2 \big) + \mu^\ast \big((A \cap E_1^c) \cap E_2^c \big)
    \end{align}
    But 
    \begin{align}
      (A \cap E_1^c) \cap E_2^c & = A \cap (E_1 \cup E_2)^c \\ 
      (A \cap E_1^c) \cap E_2 & = (A \setminus E_1) \setminus E_2 
    \end{align}
    So, $(A \cap E_1) \cup \big( (A \setminus E_1) \cap E_2 \big) = A \cap \big(A \cap (E_1 \cup E_2)^c \big)$. Therefore, we get 
    \begin{equation}
      \mu^\ast (A \cap E_1) + \mu^\ast \big((A \cap E_1^c) \cap E_2 \big) + \mu^\ast \big((A \cap E_1^c) \cap E_2^c \big) \geq \mu^\ast (A \cap (E_1 \cup E_2)) + \mu^\ast ( A \cap (E_1 \cup E_2)^c ) 
    \end{equation}
  \end{proof} 

  So we have proved that the set of all measurable sets is closed under finite unions. By definition it works for finite intersections. This makes it into an \textit{algebra}, but we want to upgrade this to a $\sigma$-algebra by proving closure under \textit{countable} unions. We will need the lemma. 

  \begin{lemma} 
    Suppose $E_1, \ldots, E_n$ are disjoint. Then, 
    \begin{equation}
      \mu^\ast \bigg( \bigcup_{j=1}^n E_j \bigg) = \sum_{j=1}^n \mu^\ast (E_j)
    \end{equation}
  \end{lemma}
  \begin{proof}
    We already did this for 2 sets, and just use induction. 
  \end{proof} 

  Now we prove lemma, which is more general (arbitrary intersections than finite?). 

  \begin{lemma} 
    Suppose $A$ is any set, $E_j$ disjoint and measurable. Then, 
    \begin{equation}
      \mu^\ast \bigg( A \cap \Big( \bigcup_{j=1}^n E_j \Big) \bigg) = \sum_{j=1}^n \mu^\ast (A \cap E_j)
    \end{equation}
  \end{lemma}
  \begin{proof}
    By induction, $n = 1$ is true. Then, 
    \begin{align}
      \mu^\ast \bigg( A \cap \Big( \bigcup_{j=1}^n E_j \Big) \bigg) 
        & = \mu^\ast \Bigg( \bigg( A \cap \Big( \bigcup_{j=1}^n E_j \Big) \bigg) \cap E_n \Bigg) + \mu^\ast \Bigg( \bigg( A \cap \Big( \bigcup_{j=1}^n E_j \Big) \bigg) \cap E_n^c \Bigg) \\  
        & = \mu^\ast (A \cap E_n) + \mu^\ast \bigg( A \cap \Big( \bigcup_{j=1}^{n-1} E_j \Big) \bigg) \\ 
        & = \sum_{j=1}^n \mu^\ast (A \cap E_j)
    \end{align}
    by the induction hypothesis. 
  \end{proof}

  \begin{theorem}[Countable Unions are Outer Measurable]
    Suppose $E_1, E_2, \ldots$ are a countable collection of measurable sets. Then, $E = \cup_{j=1}^\infty E_j$ is measurable. 
  \end{theorem}
  \begin{proof}
    They key is to look at disjoint sets. WLOG, one can assume $E_j$ are disjoint. Indeed, we can define new sets 
    \begin{equation}
      E_n^\prime \coloneqq E_n \setminus \bigg( \bigcup_{j=1}^{n-1} E_j \bigg) 
    \end{equation}
    that are measurable, with $\cup E_n^\prime = \cup E_n$. Now, fix any set $A$. Define sets $F_n = \cup_{j=1}^n E_j$. Then, $\mu^\ast (A) = \mu^\ast (A \cap F_n) + \mu^\ast (A \cap F_n^c)$. Then, $F_n^c \supset E^c \implies \mu^\ast (A \cap F_n^c) \geq \mu^\ast (A \cap E^c)$. Through the previous lemma, we have 
    \begin{equation}
      \mu^\ast (A \cap F_n) = \mu^\ast \bigg( \bigcup_{j=1}^n (A \cap E_j) \bigg) = \sum_{j=1}^n \mu^\ast (A \cap E_j) 
    \end{equation}
    Then, 
    \begin{equation}
      \mu^\ast (A) \geq \sum_{j=1}^n \mu^\ast (A \cap E_j) + \mu^\ast (A \cap E^c) 
    \end{equation}
    for every $n$, therefore also with $\infty$. But 
    \begin{equation}
      \sum_{j=1}^\infty \mu^\ast (A \cap E_j) \geq \mu^\ast (A \cap E)
    \end{equation}
    If follows that $\mu^\ast (A) \geq \mu^\ast (A \cap E) + \mu^\ast (A \cap E^c)$. 
  \end{proof}

  \begin{corollary}[Measurable Sets form a $\sigma$-Algebra]
    The set of all $\mu^\ast$-measurable sets of $X$ form a $\sigma$-algebra. 
  \end{corollary}

  With this, we can construct a lot of measurable sets. 

  \begin{lemma}[Sets of Measure 0 have no Effect]
    Suppose $\mu^\ast (E) = 0$ and $A$ is any set. Then, $\mu^\ast (A \cup E) = \mu^\ast (A)$. 
  \end{lemma}
  \begin{proof}
    We have 
    \begin{equation}
      \mu^\ast (A \cup E) = \underbrace{\mu^\ast \big( (A \cup E) \cap E \big)}_{=0} + \mu^\ast \underbrace{\big( (A \cup E) \cap E^c \big)}_{\subset A} \leq \mu^\ast (A) \leq \mu^\ast (A)
    \end{equation}
    But $A \cup E \supset A$, so $\mu^\ast (A \cup E) = \mu^\ast (A)$. 
  \end{proof}

  So we can always drop an outer-measure $0$ set and it won't affect the outer measure of the original set. 

  \begin{theorem}
    Every interval $(a, +\infty)$ is measurable. 
  \end{theorem}
  \begin{proof}
    Take any set $A$, and WLOG $a \not\in A$ (since we can take the point out without affecting outer measure). Suppose $\{I_k\}_{k=1}^\infty$ is a cover of $A$ s.t. 
    \begin{equation}
      \mu^\ast > \bigg( \sum_{k=1}^\infty \ell (I_k) \bigg) - \epsilon 
    \end{equation}
    Then, 
    \begin{enumerate}
      \item $I_k^\prime \coloneqq I_k \cap (a, +\infty)$ will cover $A_1 = A \cap (a, +\infty)$, and 
      \item $I_k^{\prime\prime} \coloneqq I_k \cap (-\infty, a)$ will cover $A_2 = A \cap (-\infty, a)$. 
    \end{enumerate}
    Therefore, $\mu^\ast (A_1)  \leq \sum_k \ell(I_k^\prime)$, $\mu^\ast (A_2) \leq \sum_k \ell(I_k^{\prime\prime})$. Also, 
    \begin{equation}
      \ell(I_k) = \ell(I_k^\prime) + \ell(I_k^{\prime\prime}) \implies \mu^\ast (A_1) + \mu^\ast (A_2) \leq \sum_k \ell(I_k) \leq \mu^\ast (A) + \epsilon
    \end{equation}
    for every $\epsilon > 0$. Since this is true for every $\epsilon > 0$, we are done.  
  \end{proof}
  
  The next theorem shows that we can construct measurable sets with ``nice'' sets on the real line. 

  \begin{theorem}[$\lambda^\ast$-measurable Sets]
    TFAE in $\mathbb{R}$ with the Lebesgue outer measure. 
    \begin{enumerate}
      \item $E$ is measurable. 
      \item $\forall \epsilon > 0$, $\exists$ open set $O \supset E$  s.t. $\mu(O \setminus E) \leq \epsilon$. 
      \item $\forall \epsilon > 0$, $\exists$ closed set $F \subset E$ s.t. $\mu^\ast (E \setminus F) < \epsilon$. 
      \item $\exists$ a $G_\delta$ set $G$ s.t. $E \subset G$ and $\mu^\ast (G \setminus E) = 0$. 
      \item $\exists$ a $F_\sigma$ set $F$ s.t. $F \subset E$ and $\mu^\ast (E \setminus F) = 0$. 
    \end{enumerate}
  \end{theorem}
  \begin{proof}
    Listed. 
    \begin{enumerate}
      \item (2) $\implies$ (1). Then for every $k \in \mathbb{N}$, we can find $O_k \supset E$ s.t. $m^\ast (O_k \setminus E) \leq 1/k$. Define the $G_\delta$ set $G = \cap_{k=1}^\infty O_k$. Then, $(G \setminus E) \subset (O_k \setminus E)$ for all $k \implies m^\ast (G \setminus E) \leq 1/k$ for all $k$. Therefore $m^\ast (G \setminus E) = 0$, and $E = G \setminus (G \setminus E)$ is measurable. 

      \item (1) $\implies$ (2). Assume $m^\ast (E) < +\infty$. Find a cover $\{I_k \}_{k=1}^\infty$ s.t. $\sum_{k=1}^\infty \ell (I_k) \leq m^\ast (E) + \epsilon$ . Call $O = \cup_k I_k$. Since $E$ is measurable, $m^\ast (O \setminus E) = m^\ast (O) - m^\ast (E) \leq \sum_{k=1}^\infty \ell(I_k) - m^\ast (E) \leq \epsilon$ 

      \item (1) $\iff$ (3). Straightforward with argument above.  

      \item (1) $\iff$ (4). Generally, we use the fact that $E$ measurable iff $E^c$ measurable. Find $O \supset E^c$ open, with $m^\ast (O \setminus E^c) \leq \epsilon$. Then $F = O^c$ is closed, $F \subset E$, and $m^\ast (E \setminus F) \leq \epsilon$. 

      \item (1) $\iff$ (5). Same argument as (1) $\iff$ (4). 
    \end{enumerate}
  \end{proof}

  The following theorem is a major one, showing that measurable sets can be approximated well by Borel sets. 

  \begin{theorem}[]
    Suppose $E$ is measurable, with $m^\ast (E) < +\infty$. Fix $\epsilon > 0$. Then there exists a finite number of intervals $\{I_k\}_{k=1}^n$ s.t. if $O = \cup_{ k=1}^n I_k$, then 
    \begin{equation}
      m^\ast (O \setminus E) + m^\ast (E \setminus O) < \epsilon
    \end{equation}
  \end{theorem}
  \begin{proof}
    Find $\{I_k\}_{k=1}^\infty$ s.t. $U = \cup_{k=1}^\infty I_k$ satisfies $E \subset U$, $m^\ast (U \setminus E) \leq \epsilon/2$. Find $n$ s.t. $\sum_{k=n+1}^\infty \ell(I_k) \leq \epsilon/2$ where WLOG, $I_k$ are disjoint. Define $O = \cup_{k=1}^n I_k$. Then, we have 
    \begin{align}
      m^\ast (O \setminus E) & \leq m(U \setminus E) \leq \frac{\epsilon}{2} \\ 
      m^\ast (E \setminus O) & \leq m(U \setminus O) \leq \sum_{k=n+1}^\infty \ell(I_k) \leq \frac{\epsilon}{2}
    \end{align}
  \end{proof}

  For $\mathbb{R}$, we can create our Lebesgue outer measure $\lambda^*$ on it, which generates the Lebesgue $\sigma$-algebra $\mathcal{M}_{\lambda^*}$. This turns out to be bigger than the Borel $\sigma$-algebra $\mathcal{B}(\mathbb{R})$, but there is little difference in which one we choose when we actually integrate. 

  \begin{theorem}
    A set $E \subset \mathbb{R}$ is Lebesgue measurable implies that it is also Borel measurable. 
    \begin{equation}
      \mathcal{B}(\mathbb{R}) \subset \mathcal{M}_{\lambda^*} \subset 2^\mathbb{R}
    \end{equation}
  \end{theorem}

  \begin{lemma}
    If $E \subset \mathbb{R}$ and $\lambda^*(E) = 0$, then $E \in \mathcal{M}_{\lambda^*}$, i.e. $E$ is Lebesgue outer-measurable. 
  \end{lemma}
  \begin{proof}
    We must prove that $E$ satisfies the Carathéodory's criterion. For all $E \subset \mathbb{R}$, we know that $\lambda^*(A) \leq \lambda^*(A \cap E) + \lambda^*(A \cap E^c)$ by definition of outer measure. Now, since $\lambda^* (E) =0$ and $A \cap E \subset E$, this means that $\lambda^* (A \cap E) = 0$ also. Furthermore, $A \cap E^c \subset A$, meaning that $\lambda^*(A) \geq \lambda^* (A \cap E^c)$, and we get 
    \begin{equation}
      \lambda^*(A) \geq \lambda^*(A \cap E) + \lambda^*(A \cap E^c)
    \end{equation}
    which proves equality. 
  \end{proof}

\subsection{Measures} 

  \begin{theorem}[Restriction of Outer Measure is a Measure]
    The restriction of an outer measure $\mu^\ast$ to the set of all $\mu^\ast$-measurable sets $\mathcal{A}$, denoted $\mu = \mu^\ast \big|_{\mathcal{A}}$ is indeed a measure
  \end{theorem}
  \begin{proof}
    We prove countable additivity. $m( \cup E_j) = \sum_j m(E_j)$. $\leq$ is trivial by countable subadditivity of the outer measure. For $\geq$, note that for every $n \in \mathbb{N}$, 
    \begin{equation}
      m \bigg( \bigcup_{j=1}^\infty E_j \bigg) \geq m \bigg( \bigcup_{j=1}^n E_j \bigg) = \sum_{j=1}^n m(E_j) 
    \end{equation}
    where the inequality comes from monotonicity and the equality comes from finite subadditivity of the outer measure. Now take $n \to \infty$. 
  \end{proof}

  Therefore, we know that the Lebesgue measure $m$ on $\mathbb{R}$ is countably additive. We also know that it is monotone by definition of outer measure, and more specifically translation invariant, since we proved it for the Lebesgue outer measure. 

  Now there are nice properties that we want Lebesgue measures to have: completeness, regularity, and translation invariance. 
  \begin{enumerate}
    \item Completeness: Given sets $A \subset B \subset C$ with $\mu(A) = \mu(C)$ and $A, C \in \mathcal{A}$, this implies that $B \in \mathcal{A}$. This basically says that if you a set that is squeezed in between two measurable sets of equal measure, then the middle set will also be measurable. 

    \item Regularity: Given sets $A \subset B \subset C$, regularity talks about whether I can approximate $B$ well. Most nice measures have this property. 
    \begin{equation}
      \sup_{A \text{ compact}} \mu(A) = \mu(B) = \inf_{C \text{ open}} \mu(C)
    \end{equation}

    \item Translation invariance: Lebesgue measure is translation invariant. $\mu(x + A) = \mu(A)$ for all $x \in \mathbb{R}^n$ on $\mathcal{B}(\mathbb{R}^n)$. 
  \end{enumerate}

  \begin{definition}[Almost Everywhere]
    Given a measure space $(X, \mathcal{A}, \mu)$, a subset $A \in \mathcal{A}$ is said to be a $\mu$-null set if $\mu(A) = 0$. If some property holds for all points $x \in X$ except on a null set, then we say that the property holds \textbf{almost everywhere}.
  \end{definition}

  \begin{example}[Rational Function]
    The function $f(x) = \frac{1}{\sqrt{|x|}}$ is less than $\infty$ almost everywhere. 
  \end{example}

  Let us first look into some properties of measures, which all seem natural. 

  \begin{theorem}[Continuity From Above]
    If $A_1 \subset A_2 \subset A_3 \subset \ldots$, then 
    \begin{equation}
      \mu\bigg( \bigcup_{k=1}^\infty A_k \bigg) = \lim_{k \rightarrow \infty} \mu(A_k)
    \end{equation}
  \end{theorem}
  \begin{proof}
    This is the first time we introduce limits. With the fact that $\mu(A_k)$ must be nondecreasing, we can use real analysis and see that it is bounded by $\infty$, meaning that it must have a limit. But why does this limit equal to the left hand side? We can see that 
    \begin{align}
      \mu\bigg( \bigcup_{k=1}^\infty A_k \bigg) & = \mu(A_1) + \sum_{k=2}^\infty \mu(B_k) \\
      & = \mu(A_1) + \lim_{k \rightarrow \infty} \sum_{k=2}^\infty \mu(B_k) \\
      & = \lim_{k \rightarrow \infty} \mu(A_1 \cup B_2 \cup \ldots B_k)  = \lim_{k \rightarrow \infty} \mu(A_k) 
    \end{align}
    where $B_k = A_k \setminus A_{k-1}$. 
  \end{proof}

  Now a similar theorem, but with a little twist to it. 

  \begin{theorem}[Continuity from Below]
    If $A_1 \supset A_2 \supset A_3 \supset \ldots$, then 
    \begin{equation}
      \mu\bigg( \bigcap_{k=1}^\infty A_k \bigg) = \lim_{k \rightarrow \infty} \mu(A_k)
    \end{equation}
    if $\mu(A_1) < \infty$. 
  \end{theorem}
  \begin{proof}
    The $\mu(A_1) < \infty$ is a necessary condition, since if we take $A_k = [k, \infty)$ on the real number line, then we have $\cap_{k=1}^\infty A_k = \emptyset$, but the limit of the measure is $\infty$. Well we can define $B_k = A_k \setminus A_{k+1}$ and write $\cap_{k=1}^\infty A_k = A_1 \setminus \cup_{k=1}^\infty B_k$, which means that 
    \begin{align*}
      \mu\bigg( \bigcap_{k=1}^\infty A_k \bigg) & = \mu\bigg( A_1 \setminus \bigcup_{k=1}^\infty B_k \bigg) \\
      & = \mu(A_1) - \mu\bigg( \bigcup_{k=1}^\infty B_k\bigg) \\
      & = \mu(A_1) - \sum_{k=1}^\infty \mu(B_k) \\
      & = \mu(A_1) - \lim_{K \rightarrow \infty} \sum_{k=1}^K \mu(B_k) \\
      & = \lim_{K \rightarrow \infty} \bigg( \mu(A_1) - \sum_{k=1}^K \mu(B_k) \bigg) \\
      & = \lim_{K \rightarrow \infty} \mu \bigg( A_1 \setminus \bigcup_{k=1}^K B_k \bigg) = \lim_{K \rightarrow \infty} \mu(A_K)
    \end{align*}
    Now the first line uses the fact that if $A \subset B$, then $\mu(B \setminus A) + \mu(A) = \mu(B)$, and with the further assumption that $\mu(A) < \infty$, we can subtract on both sides like we do with regular arithmetic. 
  \end{proof}

  \begin{lemma}[Borel-Cantelli]
    Suppose $\{E_k\}_{k=1}^\infty$ are measurable, with $\sum_{k} m(E_k) < \infty$. Then, 
    \begin{equation}
      \lambda(\limsup E_k) = \lambda \bigg( \bigcap_{n=1}^\infty \bigcup_{k=n}^\infty E_k \bigg) = 0
    \end{equation}
    That is, all $x \in \mathbb{R}$ belonging to only a finite number of $E_k$, has measure $0$. 
  \end{lemma}
  \begin{proof}
    Since $\sum_k m(E_k) < \infty$, $m ( \cup_k E_k) < \infty$. By the previous theorem, 
    \begin{equation}
      m(E) = \lim_{n \to \infty} m \bigg( \bigcup_{k=n}^\infty \bigg) \leq \lim_{n \to \infty} \sum_{k=n}^\infty m(E_k) = 0
    \end{equation}
  \end{proof}

\subsection{Nonmeasurable Sets} 

  \begin{lemma}
    Suppose $E$ is measurable, bounded, and there exists a countably infinite, bounded set $\Lambda$ s.t. $\{E + \lambda\}_{\lambda \in \Lambda}$ are disjoint. Then, $m(E) = 0$. 
  \end{lemma}
  \begin{proof}
    Consider $\cup_{\lambda \in \Lambda} \{E + \lambda\}$. It is bounded, so its measure is finite. Also, by countable addivitiy and translation invariance, we get 
    \begin{equation}
      +\infty > m \bigg( \bigcup_{\lambda \in \Lambda} \{E + \lambda\} \bigg) = \sum_{\lambda \in \Lambda} m (E + \lambda) = \sum_{\lambda \in \Lambda} m(E)
    \end{equation}
    Since $\Lambda$ is infinite, we must have $m(E) = 0$. 
  \end{proof}

  Recall that we say $x$ is \textit{rationally equivalent} to $y$ if $x - y \in \mathbb{Q}$. This is an equivalence relation on $\mathbb{R}$, giving us a quotient set of an uncountable number of classes. A \textit{choice set} for this equivalence relation is a set containing exactly one element from each class.\footnote{This assumes axiom of choice.} We can do this on any $E \subset \mathbb{R}$. 

  \begin{lemma} 
    If $C_E$ is any choice set on $E$, then 
    \begin{enumerate}
      \item $\forall x, y \in C_E$, if $x - y \not\in \mathbb{Q}$, then for all $\Lambda \in \mathbb{Q}$, $\{\lambda + C_E\}_{\lambda \in \Lambda}$ are disjoint. 
      \item $\forall x \in E$, there exists $y \in C_E$ s.t. $x - y \in \mathbb{Q}$. 
    \end{enumerate}
  \end{lemma}

  \begin{theorem}
    Any set $E$ of positive outer measure contains a nonmeasurable set. 
  \end{theorem}
  \begin{proof}
    WLOG, let $E$ be bounded.\footnote{Otherwise, just take a bounded subset.} Let $C_E$ be any choice set. Suppose $C_E$ is measurable. Let $b$ be such that $E \subset [-b, b]$. Let $\Lambda = \mathbb{Q} \cap [-2b, 2b]$. Consider the disjoint family of sets $\{C_E + \lambda\}_{\lambda \in \Lambda}$. Also, 
    \begin{equation}
      E \subset \bigcup_{\lambda \in \Lambda} \{ C_E + \lambda \}
    \end{equation}
    Indeed, $\forall x \in E$, there exists $y \in C_E$ s.t. $x - y \in \mathbb{Q}$ and in $\Lambda$ by definition of $\Lambda$ and $E \subset [-b, b]$. By the lemma, $m(C_E) = 0$. But also, 
    \begin{equation}
      m^\ast (E) \leq \sum_{\lambda \in \Lambda} \underbrace{m(C_E + \lambda)}_{= m(C_E)} = 0
    \end{equation}
    which is a contradiction, so $C_E$ is not measurable. 
  \end{proof}

  Now let's talk about fractals. The Cantor set is the simplest case of a fractal. 

  \begin{definition}[Cantor Set]
    Handwavy. Let us define 
    \begin{equation}
      C_0 = [0, 1], \qquad C_1 = [0, 1/3] \cup [2/3, 1], \ldots
    \end{equation}
    Basically, we take our every middle third of each subinterval. So $C_k$ is the union of $2^k$ intervals of size $3^{-k}$. Note that $C_k \subset C_{k-1}$. Now define the Cantor set as 
    \begin{equation}
      C \coloneqq \bigcap_{k=1}^\infty C_k
    \end{equation}
  \end{definition}

  Fractals were of interest when people tried to find the length of the coast of England. We would like to measure the ``size'' of fractals, and the measure is not a very good method since you always just get measure $0$. 

  \begin{theorem}
    The Cantor set has measure $0$, is closed, and uncountable. 
  \end{theorem}
  \begin{proof}
    Listed. 
    \begin{enumerate}
      \item For measure $0$, we can see that 
      \begin{equation}
        m(C_k) = \frac{2^k}{3^k} \to 0 \text{ as } k \to \infty 
      \end{equation}
      By monotonicity of $C_k$, $m(C) = 0$. 

      \item For uncountable, we can just do it using a tradic system and see that the Cantor set are all reals with infinite triadic representation of digits $0$ and $2$. Then create a bijection with binary represenation of reals. Here's a new way I learned. Suppose $C$ is countable, so enumerate it: $c_1, c_2, \ldots$. Pick one interval $I_1$ in $C_1$ that doesn't contain $c_1$. Then, pick $I_2 \subset I_1 \cap C_2$ s.t. it doesn't contain $c_2$. Keep going, and we get 
      \begin{equation}
        I_1 \supset I_2 \supset I_3 \supset \ldots 
      \end{equation}
      By nested intervals lemma, these are closed, bounded, and nested, which is nonempty. So we've found a point not in the Cantor set, contradicting the fact that we have enumerated it. 

      \item For closed, it is an intersection of closed sets. 
    \end{enumerate}
  \end{proof}

  The Hausdorff dimension is a nicer way. 

  \begin{definition}[Hausdorff Content]
    The \textbf{$\alpha$-Hausdorff content} of an arbitrary set $S$ is defined\footnote{To clarify, the term in the limit is an inf over a countable cover of open balls, with centers $x_i$ and radius $r_i$, each $\leq \delta$. }
    \begin{equation}
      h^\alpha (S) \coloneqq \lim_{\delta \to 0} \inf_{S \subset \bigcup_{r_i \leq \delta } B_{r_i} (x_i)} \sum_i r_i^\alpha
    \end{equation}
  \end{definition}

  \begin{definition}[Hausdorff Dimension]
    The \textbf{Hausdorff dimension} of an arbitrary set $S$ is 
    \begin{equation}
      d^H \coloneqq \inf_\alpha \{\alpha \mid h^\alpha(S) = 0 \} 
    \end{equation}
  \end{definition}

  \begin{example}
    Take a look at a straight line $S = [0, 1]$. Intuitively, you need (on the order of) $1/r$ balls of radius $r$. So, 
    \begin{equation}
      h^\alpha (S) \sim r^\alpha \cdot \frac{1}{r}  = r^{\alpha - a} \to \begin{cases} 
        +\infty & \text{ if } \alpha < 1 \\ 
        0 & \text{ if } \alpha > 1
      \end{cases} 
    \end{equation}
    So the Hausdorff dimension is $0$. 
  \end{example}

  \begin{example}
    For the Cantor set, the Hausdorff dimension is $\log{2}/\log{3}$. 
  \end{example}

  \begin{definition}[Cantor-Lebesgue Function, Devil's Staircase]
    The \textbf{Cantor-Lebesgue function} $\phi: [0, 1] \to \mathbb{R}$ is defined as such. 
    \begin{enumerate}
      \item Let us define $O_k = [0, 1] \setminus C_k$\footnote{$C_k$ defined as before when constructing the Cantor set.}, which is an open set. So $O_k$ consists of $2^k - 1$ open intervals $I_j$ ($j$ indexed from left to right). For $O_k$, we define $\phi(x) = j / 2^k$, where $j$ is the number of the interval $I_j$, indexed left to right. This defines $\phi$ on $O = \cup_{k=1}^\infty O_k = [0, 1] \setminus C$. 
      \item On $C$, let us define $\phi(x) \coloneqq \inf_{y \geq x, y \in O} \phi (x)$. 
    \end{enumerate}

    \begin{figure}[H]
      \centering 
      \includegraphics[scale=0.3]{img/devils_staircase.png}
      \caption{Plot} 
      \label{fig:devils_staircase}
    \end{figure}
  \end{definition} 

  \begin{theorem}
    $\phi$ is a nondecreasing, continuous function s.t. $\phi^\prime (x) = 0$ for all $x \in O$ and $m(O) = 1$. 
  \end{theorem}
  \begin{proof}
    Listed. 
    \begin{enumerate}
      \item \textit{Increasing}. $\phi$ is increasing on each $O_k$, and so on $O$. Then, it is also increasing on $C$ by definition. 
      \item \textit{Continuity}. If $x \in C$, it lies between 2 intervals of $O_k$ for any $k$. The difference in function values between 2 neighboring intervals of $O_k$ is $2^{-k}$, so $\phi$ is continuous. 
      \item \textit{Derivative}. The derivative is $0$ because it is constant around an interval. 
    \end{enumerate}
  \end{proof}

  \begin{theorem}[]
    Define $\psi (x) = \phi(x) + x$. Then, 
    \begin{enumerate}
      \item $\psi$ is continuous and strictly increasing. 
      \item $\psi$ maps $C$ into a set of positive measure. 
      \item $\psi$ maps some subset of $C$ into a nonmeasurable set. 
    \end{enumerate}
  \end{theorem}
  \begin{proof}
    Listed. 
    \begin{enumerate}
      \item Continuity is from sum of continuous functions, and strictly increasing since $\phi$ is nondecreasing and $x$ is strictly increasing. 
      \item We know that $\psi([0, 1]) = [0, 2]$ and $m(\psi(O))= 1$, where for each interval $I_j \subset O$, $m(\psi(I_j)) = \ell(I_j)$. Therefore, $m(\psi(C)) = 1$. 
      \item Since $\psi$ is strictly increasing, there exists a continuous inverse $\psi^{-1}$. Find $Z \subset \psi(C)$ that is nonmeasurable, which we can do from the previous theorem. Then, there exists $E \subset C$ s.t. $\psi(E) = Z$, and $E$ is not Borel since if it were, then $Z$ would be Borel, too. 
    \end{enumerate}
  \end{proof}

#!/usr/bin/env python3
from pathlib import Path

def update_index(directory):
    """Update the index file for a given directory."""
    dir_path = Path(directory)
    index_file = dir_path / f"index_{directory}.md" 
    dir_path = dir_path / "md" 
    
    print(f"Updating {index_file}...")
    
    # Check if directory exists
    if not dir_path.exists():
        print(f"Warning: Directory {directory} does not exist, skipping...")
        return
    
    # Find all .md files in the directory (not in subdirectories)
    md_files = []
    for file_path in dir_path.iterdir():
        if file_path.is_file() and file_path.suffix == '.md':
            # Skip the index file itself
            if file_path.name != f"index_{directory}.md":
                md_files.append(file_path.name)
    
    # Sort alphabetically
    md_files.sort()
    
    # Write to index file (create new or overwrite existing)
    with open(index_file, 'w') as f:
        for filename in md_files:
            f.write(f"{filename}\n")
    
    print(f"âœ“ Updated {index_file}")

def main():
    """Main function to update all index files."""
    directories = ["ml", "qc", "bc", "arvr"]
    
    print("Starting index file updates...")
    print("=" * 32)
    
    for directory in directories:
        update_index(directory)
        print()
    
    print("All index files updated successfully!")

if __name__ == "__main__":
    main()

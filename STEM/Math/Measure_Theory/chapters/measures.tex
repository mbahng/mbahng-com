\section{Measures and Sigma Algebras}

  Now, given any set $X$, we can construct its power set $2^X$. But we can't naively just give a measure to every $A \in 2^X$, since for certain spaces, this causes nasty contradictions shown through the Banach-Tarski Paradox. 

  \begin{theorem}[Banach-Tarski Paradox (Strong Form)]
    Given any two bounded subsets $A$ and $B$ of $\mathbb{R}^n$ where $n \geq 3$, both of which have a nonempty interior, there are partitions of $A$ and $B$ into a finite number of disjoint subsets, $A = A_1 \cup \ldots \cup A_k$, $B = B_1 \cup \ldots \cup B_k$, such that $A_i$ and $B_i$ are congruent for every $i \in [k]$. 
  \end{theorem}

  A nice set of subsets of $X$ to work with is the $\sigma$-algebra of $X$. 

  \begin{definition}[$\sigma$-Algebra]
    A \textbf{$\boldsymbol{\sigma}$-algebra} on a set $X$ is a collection  of subsets of $X$, denoted $\mathcal{A} \subset 2^X$ that contains $\emptyset$, $X$ itself, is stable under a countable union, and is stable under complementation. This pair $(X, \mathcal{A})$ is called a \textbf{measurable space}. 
  \end{definition}

  \begin{lemma}[Additional Property of $\sigma$-Algebras]
    A commonly known property of any $\sigma$-algebra $\mathcal{A}$ is that it is stable under countable intersections, too. 
    \begin{equation}
      A_1, A_2, \ldots, \in \mathcal{A} \implies \bigcap_{k=1}^\infty A_k \in \mathcal{A}
    \end{equation}
  \end{lemma}
  \begin{proof}
    We can utilize the fact that 
    \begin{equation}
      \bigcap_{k=1}^\infty A_k = X \setminus \bigcup_{k=1}^\infty A_k^c
    \end{equation}
  \end{proof}

  A $\sigma$-algebra is similar to the topology $\tau$ of topological space. Both $\mathcal{A}$ and $\tau$ require $\emptyset$ and $X$ to be in it. The three differences are that (i) $\tau$ does not allow compelmentation, (ii) $\tau$ allows any (even uncountable) union of sets (condition is strengthened), and (iii) $\tau$ allows only finite intersection of sets (condition is weakened). Now in order to construct $\sigma$-algebras, the following theorems are useful since they allow us to construct $\sigma$-algebras from other $\sigma$-algebras. It turns out that the intersection of $\sigma$-algebras is a $\sigma$-algebra, but not for unions. 

  \begin{theorem}[Intersection of Sigma Algebras is a Sigma Algebra]
    Let $\{\mathcal{A}_k\}$ be a family of $\sigma$-algebras of $X$. Then, $\cap \mathcal{A}_k$ is also a $\sigma$-algebra of $X$. 
  \end{theorem}
  \begin{proof}
    Clearly, $\emptyset, X$ is in $\cap \mathcal{A}_k$. To prove complementation, 
    \begin{equation}
      A \in \bigcap \mathcal{A}_k \implies A \in \mathcal{A}_k \; \forall k \implies A^c \in A_k \; \forall k \implies A^c \in \bigcap \mathcal{A}_k
    \end{equation}
    To prove countable union, let $\{A_j\}_{j \in J}$ be some countable family of subsets in $\cap \mathcal{A}_k$. Then, 
    \begin{equation}
      A_j \in \bigcap \mathcal{A}_k \; \forall j \in J \implies A_j \in \mathcal{A}_k \; \forall k \forall j \implies \bigcup A_j \in \mathcal{A}_k \; \forall k \implies \bigcup A_j \in \bigcap \mathcal{A}_k
    \end{equation}
  \end{proof}

  This allows us to easily prove the following proposition, which just establishes the existence of $\sigma$-algebras. 

  \begin{proposition}[Unique Smallest Sigma Algebra]
    Let $F \subset 2^X$. Then there exists a unique smallest $\sigma$-algebra $\sigma(F)$ containing $F$. 
  \end{proposition}
  \begin{proof}
    Let us denote $\mathcal{M}$ as the set of all possible $\sigma$-algebras $\mathcal{B}$ of $X$. $\mathcal{M}$ is nonempty since it contains $2^X$. Then, the intersection 
    \begin{equation}
      \bigcap_{\mathcal{B} \in \mathcal{M}} \mathcal{B}
    \end{equation}
    is the unique smallest $\sigma$-algebra. 
  \end{proof}

  Now, we can introduce the first nontrivial $\sigma$-algebra, called the Borel $\sigma$-algebra. 

  \begin{definition}[Borel $\sigma$-algebra]
    The \textbf{Borel $\boldsymbol{\sigma}$-algebra} of a topological space $(X, \tau)$ is the $\sigma$-algebra generated by the topology $\tau$, denoted $\mathcal{B}(X)$. 
  \end{definition}

  Now, how do we measure a size on $\mathcal{B}(X)$? We use measures. 

  \begin{definition}[Measure]
    Given a measurable space $(X, \mathcal{A})$, a \textbf{measure} is a function $\mu : \mathcal{A} \longrightarrow [0, +\infty]$ satisfying 
    \begin{enumerate}
      \item Null empty set $\mu(\emptyset) = 0$ 
      \item Countable additivity: For all countable collections $\{A_k\}_{k=1}^\infty$ of pairwise disjoint subsets $A_k \in \mathcal{A}$, 
      \begin{equation}
        \mu \bigg( \bigsqcup_{k=1}^\infty A_k \bigg) = \sum_{k=1}^\infty \mu(A_k)
      \end{equation}
      Remember that we are allowed to take countable unions inside our $\sigma$-algebra, so this makes sense. 
    \end{enumerate}
    This immediately implies that given $A, B \in \mathcal{A}$, then $A \subset B \implies \mu(A) \leq \mu(B)$. The triplet $(X, \mathcal{A}, \mu)$ is called a \textbf{measure space}. 
  \end{definition}

  The first condition is important because it allows us to take finite disjoint unions. That is, since $\mu(A_1 \cup A_2) = \mu(A_1 \cup A_2 \cup \emptyset \cup \ldots)$, we have 
  \begin{equation}
    \sum_{k=1}^\infty = \mu(A_1) + \mu(A_2)
  \end{equation}
  Disjointness is clearly important since if it wasn't, then $\mu(A) = \mu(A \cup A) = 2 \mu(A)$, which is absurd. Now our natural measure on the real number line with its Borel $\sigma$-algebra $(\mathbb{R}, \mathcal{B})$, we want a measure satisfying $\mu((a, b)) = b - a$ and $\mu([0, \infty)) = \infty$. Such a measure does exist, and it is called the Lebesgue measure, but proving its existence is highly nontrivial. Let us first look into some properties of measures, which all seem natural. 

  \begin{proposition}
    If $A_1 \subset A_2 \subset A_3 \subset \ldots$, then 
    \begin{equation}
      \mu\bigg( \bigcup_{k=1}^\infty A_k \bigg) = \lim_{k \rightarrow \infty} \mu(A_k)
    \end{equation}
  \end{proposition}
  \begin{proof}
    This is the first time we introduce limits. With the fact that $\mu(A_k)$ must be nondecreasing, we can use real analysis and see that it is bounded by $\infty$, meaning that it must have a limit. But why does this limit equal to the left hand side? We can see that 
    \begin{align}
      \mu\bigg( \bigcup_{k=1}^\infty A_k \bigg) & = \mu(A_1) + \sum_{k=2}^\infty \mu(B_k) \\
      & = \mu(A_1) + \lim_{k \rightarrow \infty} \sum_{k=2}^\infty \mu(B_k) \\
      & = \lim_{k \rightarrow \infty} \mu(A_1 \cup B_2 \cup \ldots B_k)  = \lim_{k \rightarrow \infty} \mu(A_k) 
    \end{align}
    where $B_k = A_k \setminus A_{k-1}$. 
  \end{proof}

  Now a similar theorem, but with a little twist to it. 

  \begin{proposition}
    If $A_1 \supset A_2 \supset A_3 \supset \ldots$, then 
    \begin{equation}
      \mu\bigg( \bigcap_{k=1}^\infty A_k \bigg) = \lim_{k \rightarrow \infty} \mu(A_k)
    \end{equation}
    if $\mu(A_1) < \infty$. 
  \end{proposition}
  \begin{proof}
    The $\mu(A_1) < \infty$ is a necessary condition, since if we take $A_k = [k, \infty)$ on the real number line, then we have $\cap_{k=1}^\infty A_k = \emptyset$, but the limit of the measure is $\infty$. Well we can define $B_k = A_k \setminus A_{k+1}$ and write $\cap_{k=1}^\infty A_k = A_1 \setminus \cup_{k=1}^\infty B_k$, which means that 
    \begin{align*}
      \mu\bigg( \bigcap_{k=1}^\infty A_k \bigg) & = \mu\bigg( A_1 \setminus \bigcup_{k=1}^\infty B_k \bigg) \\
      & = \mu(A_1) - \mu\bigg( \bigcup_{k=1}^\infty B_k\bigg) \\
      & = \mu(A_1) - \sum_{k=1}^\infty \mu(B_k) \\
      & = \mu(A_1) - \lim_{K \rightarrow \infty} \sum_{k=1}^K \mu(B_k) \\
      & = \lim_{K \rightarrow \infty} \bigg( \mu(A_1) - \sum_{k=1}^K \mu(B_k) \bigg) \\
      & = \lim_{K \rightarrow \infty} \mu \bigg( A_1 \setminus \bigcup_{k=1}^K B_k \bigg) = \lim_{K \rightarrow \infty} \mu(A_K)
    \end{align*}
    Now the first line uses the fact that if $A \subset B$, then $\mu(B \setminus A) + \mu(A) = \mu(B)$, and with the further assumption that $\mu(A) < \infty$, we can subtract on both sides like we do with regular arithmetic. 
  \end{proof}

\subsection{Outer Measures, Construction of Lebesgue Measure}

  Now let's try to construct a measure $\lambda$ on the Borel $\sigma$-algebra $\mathcal{B}(\mathbb{R})$ that assigns length, i.e. $\lambda([a, b]) = b - a$. We will do so by constructing outer measures $\lambda^*: 2^\mathbb{R} \longrightarrow \mathbb{R}$ that acts on the power set of $\mathbb{R}$ s.t. $\lambda^*([a, b]) = b - a$. But this turns out to have its own problems and contradictions, so once we construct such a $\lambda^*$, we will "throw away" all the sets that don't behave nicely under $\lambda^*$ and just use its restriction on the Borel algebra. It turns out that the sets that do behave well under $\lambda^*$ is bigger than the Borel algebra, call it $\mathcal{M}_{\lambda^*}$. So, we have $\mathcal{B}(\mathbb{R}) \subset \mathcal{M}_{\lambda^*} \subset 2^\mathbb{R}$. We will do this in full generality in the following way. We take any space $X$ and construct an outer measure $\mu^*$ on its power set $2^X$. Then, we construct the $\sigma$-algebra of well-behaved sets $\mathcal{M}_{\mu^*} \subset 2^X$, and define our measure $\mu$ on $\mathcal{M}_{\mu^*}$. When defining our outer measure, the condition that the outer measure of a disjoint union of subsets is equal to the sum of the outer measure of the subsets is a bit too restricting, so we use a softer condition. 

  \begin{definition}[Outer Measure]
    A function $\mu^* : 2^X \longrightarrow [0, \infty]$ is an \textbf{outer measure} if $\mu^*(\emptyset) = 0$, $A \subset B \implies \mu^* (A) \leq \mu^*(B)$, and 
    \begin{equation}
      \mu^* \bigg( \bigcup_{k=1}^\infty A_k \bigg) \leq \sum_{k=1}^\infty \mu^* (A_k)
    \end{equation}
    This final condition removes the fact that they must be disjoint, and now we have an inequality. 
  \end{definition}

  Now to construct our Lebesgue outer measure, let us define the following on $\mathbb{R}$. It's a hard definition, but a natural one, since we're taking all these intervals and trying to make them as snug as possible to define the outer measure of an arbitrary set. 

  \begin{definition}[Lebesgue Outer Measure of $\mathbb{R}$]
    Given $A \subset \mathbb{R}$, let 
    \begin{equation}
      C_A = \big\{ \{(a_j, b_j)\}_{j=1}^\infty \mid A \subset \bigcup_{j=1}^\infty (a_j, b_j) \big\}
    \end{equation}
    This is more complicated than it looks. Given a set $A$, we are looking at a family of all collections of intervals that cover $A$. Clearly, all coverings in $C_A$ must have a length greater than $A$, and their length can be easily measured by summing up the intervals $\sum_{j=1}^\infty (b_j - a_j)$. So, we can define the outer measure of $A$ to be the infimum of these sums. 
    \begin{equation}
      \lambda^*(A) = \inf_{C_A} \sum_{j=1}^\infty (b_j - a_j)
    \end{equation}
    We can also generalize this further by introducing a increasing, continuous function $F: \mathbb{R} \rightarrow \mathbb{R}$ and defining the outer measure to be 
    \begin{equation}
     \lambda^*(A) = \inf_{C_A} \sum_{j=1}^\infty \big( F(b_j) - F(a_j) \big) 
    \end{equation}
  \end{definition}

  \begin{example}[Rationals have Outer Measure $0$]
    Let us prove that $\lambda^*(\mathbb{Q}) = 0$. It is countable so we can enumerate it $\mathbb{Q} = \{ q_j\}_{j=1}^\infty$. This is counterintuitive, because since $\mathbb{Q}$ is dense in $\mathbb{R}$, in order to make a covering of $\mathbb{Q}$ we sort of have to cover the entire real line. Visually, this is hard, but it is pretty simple to show that you don't have to. We pick $\epsilon > 0$ and define 
    \begin{equation}
      I_j = \big( q_j - \frac{\epsilon}{2^j} , q_j + \frac{\epsilon}{2^j} \big)
    \end{equation}
    So, 
    \begin{equation}
      \sum_{j=1}^\infty |I_j| = \sum_{j=1}^\infty \frac{\epsilon}{2^j} = 2 \epsilon
    \end{equation}
    This collection $\{I_j\}$ is one element of $C_\mathbb{Q}$ of coverings of the rationals, and taking $\epsilon$ as small as we want, the infimum is $0$. This can be done with all countable subsets of $\mathbb{R}$. 
  \end{example}

  \begin{definition}[Almost Everywhere]
    Given a measure space $(X, \mathcal{A}, \mu)$, a subset $A \in \mathcal{A}$ is said to be a $\mu$-null set if $\mu(A) = 0$. If some property holds for all points $x \in X$ except on a null set, then we say that the property holds \textbf{almost everywhere}.
  \end{definition}

  \begin{example}[Rational Function]
    The function $f(x) = \frac{1}{\sqrt{|x|}}$ is less than $\infty$ almost everywhere. 
  \end{example}

  \begin{proposition}[$\lambda^*$ is an Outer Measure]
    The first condition is trivial. As for 2, if I have $A \subset B \subset \mathbb{R}$ and have a covering of $B$, then I also have a covering of $A$, and so the infimum corresponding to the covering of $B$ must be greater than or equal to the infimum of that corresponding to the covering of $A$. For 3, we want to prove that the outer measure of the union of $A_k$'s is less than or equal to the sum of the outer measures of the $A_k$'s. We pick $\epsilon > 0$ and have some covering $\{(a^k_j, b^k_j)\}_{j=1}^\infty \in C_{A^k}$. So we have 
    \begin{equation}
      \lambda^*(A_k) \leq \sum_{j=1}^\infty b^k_j - a^k_j
    \end{equation}
    We want the inequality to go the other way around, but we can't do that. But note that $\lambda^* (A_k)$ is the infimum of all coverings $\{(a^k_j, b^k_j)\}_{j=1}^\infty$ of $A_k$, and so we can choose a covering that is as close to $\lambda^* (A_k)$, and then add a term of $\epsilon$ to $\lambda^*(A_k)$ to make it greater than this covering. This is an important step of the proof that is used often! 
    \begin{equation}
      \frac{\epsilon}{2^k} + \lambda^* (A_k) \geq \sum_{j=1}^\infty b_j^k - a_j^k 
    \end{equation}
    Now, 
    \begin{equation}
      A = \bigcup_{k=1}^\infty A_k \subset \bigcup_{k=1}^\infty \bigcup_{j=1}^\infty (a_j^k, b_j^k)
    \end{equation}
    and we can see that $\{(a_j^k , b_j^k)\}_{j, k=1}^\infty \in C_A$ is a countable covering of $A$ (since the countable union of a countable union is countable), implying that 
    \begin{equation}
      \lambda^* (A) \leq \sum_{k=1}^\infty \sum_{j=1}^\infty (b_j^k - a_j^k) \leq \sum_{k=1}^\infty \bigg( \lambda^* (A_k) + \frac{\epsilon}{2^k} \bigg) = \epsilon + \sum_{k=1}^\infty \lambda^*(A_k)
    \end{equation}
    and so setting $\epsilon$ arbitrarily small we have $\lambda^* (A) \leq \sum_{k=1}^\infty \lambda^* (A_k)$. 
  \end{proposition}

  In $\mathbb{R}^n$, this construction is exactly the same, since we can take rectangular prisms, which we know the area/volume of, make a countable covering of some arbitrary set $A \subset \mathbb{R}^n$, and then find the infimum of the volume of this set. But we can't apply the outer measure on power sets since there exists some sets that do not behave like how we want it to behave under a measure. For example, there exists disjoint $A, B \subset (0, 1)$ s.t. $A \cup B = (0, 1)$, but $\lambda^*(A) + \lambda^*(B) > 1$. 

  \begin{definition}[Carathéodory's criterion]
    Given outer measure $\mu^*$ on $X$, a set $B$ is $\mu^*$-measurable if 
    \begin{equation}
      \forall A \subset X \; \mu^*(A) = \mu^*(A \cap B) + \mu^*(A \cap B^c)
    \end{equation}
    Obviously, the LHS $\leq$ RHS by the third condition of outer measures. 
  \end{definition}

  There is not much of an intuition for this definition, but in general it says that no matter how nasty a subset $A$ is, $B$ should be nice enough that we can cut $B$ into two pieces. Remember that this is a condition on $B$, not $A$. 

  \begin{example}
    Take $X = \mathbb{R}$ and have $B = (-\infty, b]$. Then $B^c = (b, \infty)$, and $B$ divides $\mathbb{R}$ into a right side and a left side. If we take any subset $A \subset \mathbb{R}$, then $B$ is nice enough to divide $A$ into a left and a right side. 
  \end{example}

  \begin{theorem}
    If $\mu^*$ is an outer measure on $X$, $\mathcal{M}_{\mu^*} = \{$all $\mu^*$-measurable sets$\}$, then 
    \begin{enumerate}
      \item $\mathcal{M}_{\mu^*}$ is a $\sigma$-algebra. 
      \item $\mu = \mu^* \big|_{\mathcal{M}_{\mu^*}}$ is a measure. 
    \end{enumerate}
  \end{theorem}

  To recap, we first take a set $X$, construct an outer measure $\mu^*$ on it. This allows us to define the set of all $\mu^*$-measurable sets $B$ on $X$, which create a $\sigma$-algebra $\mathcal{M}$, and the restriction of $\mu^*$ onto $\mathcal{M}$ is a measure $\mu$. For $\mathbb{R}$, we can create our Lebesgue outer measure $\lambda^*$ on it, which generates the Lebesgue $\sigma$-algebra $\mathcal{M}_{\lambda^*}$. This turns out to be bigger than the Borel $\sigma$-algebra $\mathcal{B}(\mathbb{R})$, but there is little difference in which one we choose when we actually integrate. 

  \begin{theorem}
    A set $E \subset \mathbb{R}$ is Lebesgue measurable implies that it is also Borel measurable. 
    \begin{equation}
      \mathcal{B}(\mathbb{R}) \subset \mathcal{M}_{\lambda^*} \subset 2^\mathbb{R}
    \end{equation}
  \end{theorem}

  \begin{lemma}
    If $E \subset \mathbb{R}$ and $\lambda^*(E) = 0$, then $E \in \mathcal{M}_{\lambda^*}$, i.e. $E$ is Lebesgue outer-measurable. 
  \end{lemma}
  \begin{proof}
    We must prove that $E$ satisfies the Carathéodory's criterion. For all $E \subset \mathbb{R}$, we know that $\lambda^*(A) \leq \lambda^*(A \cap E) + \lambda^*(A \cap E^c)$ by definition of outer measure. Now, since $\lambda^* (E) =0$ and $A \cap E \subset E$, this means that $\lambda^* (A \cap E) = 0$ also. Furthermore, $A \cap E^c \subset A$, meaning that $\lambda^*(A) \geq \lambda^* (A \cap E^c)$, and we get 
    \begin{equation}
      \lambda^*(A) \geq \lambda^*(A \cap E) + \lambda^*(A \cap E^c)
    \end{equation}
    which proves equality. 
  \end{proof}

  Now there are nice properties that we want Lebesgue measures to have: completeness, regularity, and translation invariance. 
  \begin{enumerate}
    \item Completeness: Given sets $A \subset B \subset C$ with $\mu(A) = \mu(C)$ and $A, C \in \mathcal{A}$, this implies that $B \in \mathcal{A}$. This basically says that if you a set that is squeezed in between two measurable sets of equal measure, then the middle set will also be measurable. 
    \item Regularity: Given sets $A \subset B \subset C$, regularity talks about whether I can approximate $B$ well. Must nice measures have this property. 
      \begin{equation}
      \sup_{A \text{ compact}} \mu(A) = \mu(B) = \inf_{C \text{ open}} \mu(C)
      \end{equation}
    \item Translation invariance: Lebesgue measure is translation invariant. $\mu(x + A) = \mu(A)$ for all $x \in \mathbb{R}^n$ on $\mathcal{B}(\mathbb{R}^n)$. 
  \end{enumerate}

